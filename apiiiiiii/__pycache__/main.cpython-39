a

    √≠
2b'  √£                   @   s√®   U d dl mZmZmZ d dlZd dlZd dlmZ d dl	m
Z
 d dlZe∆í Z
eed< ddgZe
jeedd	gd	gd
¬ç ejj¬†d¬°Zg d¬¢Ze
¬†d
¬°dd‚Äû ∆íZejd≈ìdd‚ÄûZe
¬†d¬°ed∆ífed≈ìdd‚Äû∆íZedkr√§eje
ddd¬ç dS )√©    )√öFastAPI√öFile√ö
UploadFileN)√öBytesIO)√öImage√öappzhttp://localhostzhttp://localhost:3000T√ö*)Z
allow_originsZallow_credentialsZ
allow_methodsZ
allow_headersz../newmodels/2)zAcne and Rosacea Photosz
Eczema Photosz"Nail Fungus and other Nail Diseasez*Warts Molluscum and other Viral Infectionsz/pingc                   √É   s   dS )NZHi¬© r	   r	   r	   √∫2C:\Users\DM\Desktop\FYP\models\apiiiiiii\.\main.py√öping   s    r   )√öreturnc                 C   s   t ¬†t¬†t| ∆í¬°¬°}|S )N)√önpZarrayr   √öopenr   )√ödata√öimager	   r	   r
   √öread_file_as_image   s    r   z/predict.)√öfilec                 √É   sV   t | ¬†¬° I d H ∆í}t¬†|d¬°}t¬†|¬°}tt¬†|d ¬° }t¬†|d ¬°}|t	|∆íd≈ìS )Nr   )√öclass√ö
confidence)
r   √öreadr
   Zexpand_dims√öMODEL√öpredict√öCLASS_NAMESZargmax√ömax√öfloat)r   r   Z	img_batchZpredictionsZpredicted_classr   r	   r	   r
   r   $   s    
√ær   √ö__main__√ö	localhosti@  )√öhost√öport)Zfastapir   r   r   √öuvicornZnumpyr
   √öior   ZPILr   Z
tensorflowZtfr   √ö__annotations__ZoriginsZadd_middlewareZCORSMiddlewareZkeras√ömodelsZ
load_modelr   r   √ögetr   Zndarrayr   Zpostr   √ö__name__√örunr	   r	   r	   r
   √ö<module>   s8   √æ√ª
√ø√ø
